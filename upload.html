<head>
	<title>Simple Image Upload</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
	<div class="container">
		<h2>Upload an image</h2>
		{{>file_form}}
		{{>imagelist}}
	</div>
</body>

<template name="file_form">
	<div class="fileupload fileupload-new" data-provides="fileupload">		
		<div class="input-append">
			<div class="uneditable-input"><i class="icon-file fileupload-exists"></i> <span class="fileupload-preview"></span></div><span class="btn btn-file"><span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span><input id="upload" accept="image/*" type="file" name="file"></span><a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
		</div>
	</div>
{{#isolate}}
	{{#if uploading_percentage}}
		<div class="progress progress-striped active">
			<div class="bar" style="width: {{uploading_percentage}}%;"></div>
		</div>
	{{/if}}

	{{#if uploading_complete}}
		<div class="alert alert-success">
			Upload Finalized and Successful!
		</div>
	{{/if}}
	
	{{#if rendering_percentage}}
		<div class="progress progress-success progress-striped active">
			<div class="bar" style="width: {{rendering_percentage}}%"></div>
		</div>
		<div class="alert alert-info">
			<strong>Upload Successful:</strong> Rendering thumbnail!
		</div>
	{{/if}}
{{/isolate}}
</template>

<template name="imagelist">
	{{#each image}}
		{{> imagecontainer}}
	{{/each}}
</template>
<template name="imagecontainer">
	<div>
		<img src="http://simplechat.s3.amazonaws.com/{{image}}" class="img-rounded">
		<img src="http://simplechat.s3.amazonaws.com/{{thumb}}" class="img-rounded">
	</div>
</template>
